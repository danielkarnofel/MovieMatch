<!DOCTYPE html>
<html>
<%- include("partials/head.ejs") %>
<body>
<%- include("partials/header.ejs") %>

<main>
	<% if (typeof flash !== 'undefined') { %>
		<div><%= flash %></div>
	<% } %>

	<section>
		<h1>Hi <%= username %>!</h1>
	</section>

	<section class="lists-container">

		<h2>My Lists</h2>

		<form action="/api/lists/create" method="POST">
			<input type="text" name="name" placeholder="List Name" required>
			<textarea name="description" placeholder="Description (optional)"></textarea>
			<button class="btn" type="submit">Create List</button>
		</form>

		<% if (!userLists || userLists.length === 0) { %>
			<p>No lists yet.</p>
		<% } else { %>
			<% userLists.forEach(list => { %>
				<div class="list">
					<h3><%= list.name %></h3>
					<p><%= list.description %></p>
					<a class="btn" href="/list/<%= list.id %>">Edit</a>
					<form action="/api/lists/delete/<%= list.id %>" method="POST" style="display:inline;">
						<button class="btn" type="submit" onclick="return confirm('Delete this list?')">Delete</button>
					</form>
				</div>
			<% }) %>
		<% } %>

	</section>

</main>

<%- include("partials/footer.ejs") %>
</body>
</html>